<!DOCTYPE html>
<!--
 * Copyright (c) 2010 The Chromium Authors. All rights reserved.  Use of this
 * source code is governed by a BSD-style license that can be found in the
 * LICENSE file.
 *
 * @author: Menencia
-->
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<style>
		body {font-size: 0.8em; width: 300px; margin: auto; margin-top: 30px;}
		h1 {text-align: center;}
		
	</style>
    <script type="text/javascript" src="md5.js"></script>
    <script type="text/javascript">
      
var bgPage = chrome.extension.getBackgroundPage();
      
function init() {
	document.forms[0].login.value = bgPage.login;
}

function test() {
	bgPage.login = document.forms[0].login.value;
	bgPage.password = calcMD5(document.forms[0].password.value);
	if (bgPage.connect()) {
		localStorage.login = login;
		localStorage.password = password;
		bgPage.update_badge();
		document.getElementById('message').innerHTML = "Vous êtes connecté!";
	}
	else {
		document.getElementById('message').innerHTML = "Vous n'êtes pas connecté!";
	}
}	  
	  
	</script>
</head>
<body onLoad="init();">
	<div id="content">
		<h1>Préférences</h1>
		
		<div id="message"></div>
	
		<form>
		
		<table>
			<tr>
				<td>Login:</td>
				<td><input type="text" name="login" /></td>
			</tr>
			<tr>
				<td>Password:</td>
				<td><input type="password" name="password" /></td>
			</tr>
		</table>
		
		<div class="valid">
			<input type="submit" onClick="test(); return false;" value="Valider" />
		</div>
		
		</form>
	</div>
</body>
</html>

