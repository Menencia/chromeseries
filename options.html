<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<!--
 * Copyright (c) 2010 The Chromium Authors. All rights reserved.  Use of this
 * source code is governed by a BSD-style license that can be found in the
 * LICENSE file.
 *
 * @author: Menencia
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<style>
			#save {
				width: 85px; 
				cursor: pointer; 
				border: 1px solid #999; 
				font-variant: small-caps;}
		</style>
	</head>
	<body>
		
		<h1>Options</h1>
		
		<p>Langue des sous-titres : 
		<select name="dl_srt_language" id="dl_srt_language">
			<option value="VO">VO</option>
			<option value="VF">VF</option>
			<option value="ALL">VO & VF</option>
		</select></p>
		
		<p>Nbr d'épisodes à afficher par série : 
		<input type="text" size="2" name="nbr_episodes_per_serie" id="nbr_episodes_per_serie" />
		</p>
		
		<p>La valeur du badge correspond à : 
		<select name="badge_notification_type" id="badge_notification_type">
			<option value="watched">Nbr d'épisodes non vus</option>
			<option value="downloaded">Nbr d'épisodes non téléchargés</option>
		</select>
		</p>
		
		<div id="save">Sauvegarder</div>
		
		<script src='jquery.js'></script>
		<script>
			$(document).ready(function(){
			
				var bgPage = chrome.extension.getBackgroundPage();
				
				$('#dl_srt_language').val(localStorage.dl_srt_language);
				$('#nbr_episodes_per_serie').attr('value', localStorage.nbr_episodes_per_serie);
				$('#badge_notification_type').val(localStorage.badge_notification_type);
				
				$('#save').click(function(){
					localStorage.dl_srt_language = $('#dl_srt_language').val();
					localStorage.nbr_episodes_per_serie = $('#nbr_episodes_per_serie').attr('value');
					localStorage.badge_notification_type = $('#badge_notification_type').val();
					bgPage.updateBadge();
					$(this).html('Sauvegardé!');
					$(this).css('color', '#090');
					setTimeout(init_save, 1000*2);
				});
				
				var init_save = function(){
					console.log('here');
					$('#save').html('Sauvegarder');
					$('#save').css('color', '#000');
				};
				
			});
		</script>
	</body>
</html>

